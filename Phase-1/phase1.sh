#! /bin/bash

if [ "$#" -ne 3 ]; then
    echo "Usage: $0 <source_directory> <destination_directory> <pattern regex>"
    exit 1
fi

source_dir=$1
desti_dir=$2
regex=$3

if [ ! -d "$source_dir" ]; then
    echo "source directory does not exists"
fi

if [ ! -d "$desti_dir" ]; then
    mkdir "$desti_dir"
fi

cd "$source_dir"

for file in *;
do
    if [[ $file =~ $regex ]]; then
        cp "$file" "$desti_dir"
    fi
done

echo "Files matching '$regex' copied from '$source_dir' to '$desti_dir'."
