#! /bin/bash

if [ "$#" -ne 3 ]; then
    echo "Usage: $0 <source_directory> <destination_directory> <pattern regex>"
    exit 1
fi

source_dir=$1
desti_dir=$2
regex=$3

if [ ! -d "$source_dir" ]; then
    echo "source directory does not exists"
fi

if [ ! -d "$desti_dir" ]; then
    mkdir "$desti_dir"
    
    if [ $? -eq 0 ]; then
    	echo "Directory "$desti_dir" created"
    else
    	echo "Failed to create $desti_dir"
    fi
    
fi


for file in "$source_dir"/*; do
    if [[ $file =~ $regex ]]; then
        cp "$file" "$desti_dir"
        if [ $? -eq 0 ]; then
           echo "Copied '$file' to '$desti_dir' successfully"
        else
           echo "Failed to copy '$file' to '$desti_dir'"
        fi
    fi
done

